/*!  - v2.4.3-beta.1
 * https://premium.wpmudev.org/project/appointments-plus/
 * Copyright (c) 2019; * Licensed GPLv2+ */
function app_checkclear(a){a._haschanged||(a.value=""),a._haschanged=!0}!function(a){function b(a){var b=l10nAppApi&&l10nAppApi.show_login_button?l10nAppApi.show_login_button:[];return b.indexOf(a)>=0}function c(c){a("#appointments-login_links-wrapper").length&&a("#appointments-login_links-wrapper").remove(),c.parents(".appointments-login").after('<div id="appointments-login_links-wrapper" />');var d=a("#appointments-login_links-wrapper");d.html('<ul class="appointments-login_links">'+(b("facebook")?'<li><a href="#" class="appointments-login_link appointments-login_link-facebook">'+l10nAppApi.facebook+"</a></li>":"")+(b("twitter")?'<li><a href="#" class="appointments-login_link appointments-login_link-twitter">'+l10nAppApi.twitter+"</a></li>":"")+(b("google")?l10nAppApi.gg_client_id?'<li><span id="signinButton"> <span class="g-signin"data-callback="app_google_plus_login_callback"data-clientid="'+l10nAppApi.gg_client_id+'"data-cookiepolicy="single_host_origin"data-scope="profile email"> </span> </span></li>':'<li><a href="#" class="appointments-login_link appointments-login_link-google">'+l10nAppApi.google+"</a></li>":"")+(b("wordpress")?'<li><a href="#" class="appointments-login_link appointments-login_link-wordpress">'+l10nAppApi.wordpress+"</a></li>":"")+'<li class="app_login_submit"><input type="text" class="app_username" name="log" placeholder="Username" /><input type="password" name="pwd" class="app_password" placeholder="Password" /><a href="javascript:void(0)" class="appointments-login_link appointments-login_link-submit">'+l10nAppApi.submit+"</a></li>"+(l10nAppApi.registration_url?'<li><a href="'+l10nAppApi.registration_url+'" class="appointments-login_link appointments-register_link-wordpress">'+l10nAppApi.register+"</a></li>":"")+'<li><a href="#" class="appointments-login_link appointments-login_link-cancel">'+l10nAppApi.cancel+"</a></li></ul>"),d.find(".appointments-login_link").each(function(){var b=a(this),e=!1;if(b.is(".appointments-login_link-facebook")){if("undefined"==typeof FB)return b.parents("li").hide(),!0;e=function(){return FB.login(function(b){b.authResponse&&b.authResponse.userID&&(d.html('<img src="'+_appointments_data.root_url+'waiting.gif" /> '+l10nAppApi.please_wait),a.post(_appointments_data.ajax_url,{action:"app_facebook_login",user_id:b.authResponse.userID,token:FB.getAccessToken()},function(b){var c=0;try{c=parseInt(b.status,10)}catch(e){c=0}return c?void(b.status&&1==b.status?(a(".appointments-login_inner").text(l10nAppApi.logged_in),window.location.href=window.location.href,window.location.reload()):alert(l10nAppApi.error)):(d.remove(),!1)}))},{scope:"email"}),!1}}else if(b.is(".appointments-login_link-twitter")){if(!l10nAppApi._can_use_twitter)return b.parents("li").hide(),!0;e=function(){var b=window.open("","twitter_login","scrollbars=no,resizable=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no,height=400,width=600");return b.document.write(l10nAppApi.please_wait||"Please hold on..."),a.post(_appointments_data.ajax_url,{action:"app_get_twitter_auth_url",url:window.location.toString()},function(c){var e=c.url,f=function(){a(b).off("unload",f);var e=setInterval(function(){try{if(b.location.hostname==window.location.hostname){clearInterval(e),b.close();var f=b.location,g="";try{g=f.search}catch(h){g=""}clearInterval(e),b.close(),d.html('<img src="'+_appointments_data.root_url+'waiting.gif" /> '+(l10nAppApi.please_wait||"Please hold on...")),a.post(_appointments_data.ajax_url,{action:"app_twitter_login",secret:c.secret,data:g},function(b){var c=0;try{c=parseInt(b.status,10)}catch(e){c=0}return c?void(b.status&&1==b.status?(a(".appointments-login_inner").text(l10nAppApi.logged_in),window.location.href=window.location.href,window.location.reload()):alert(l10nAppApi.error)):(d.remove(),!1)})}}catch(h){}},300)};a(b).on("unload",f),b.location=e}),!1}}else b.is(".appointments-login_link-google")?e=function(){var b=window.open("https://www.google.com/accounts","google_login","scrollbars=no,resizable=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no,height=400,width=800");return a.post(_appointments_data.ajax_url,{action:"app_get_google_auth_url",url:window.location.href},function(e){var f=e.url;b.location=f;var g=setInterval(function(){try{b.location.hostname==window.location.hostname&&(clearInterval(g),b.close(),d.html('<img src="'+_appointments_data.root_url+'waiting.gif" /> '+l10nAppApi.please_wait),a.post(_appointments_data.ajax_url,{action:"app_google_login"},function(b){var e=0;try{e=parseInt(b.status,10)}catch(f){e=0}return e?void(b.status&&1==b.status?(a(".appointments-login_inner").text(l10nAppApi.logged_in),window.location.href=window.location.href,window.location.reload()):alert(l10nAppApi.error)):(d.remove(),c.click(),!1)}))}catch(e){}},300)}),!1}:b.is(".appointments-login_link-wordpress")?e=function(){return a(".app_login_submit").show(),!1}:b.is(".appointments-login_link-submit")?e=function(){a(".app_error").remove(),b.after('<div class="app_wait_img"><img src="'+_appointments_data.root_url+'waiting.gif" /> '+l10nAppApi.please_wait+"</div>"),a.post(_appointments_data.ajax_url,{action:"app_ajax_login",log:b.parents(".app_login_submit").find(".app_username").val(),pwd:b.parents(".app_login_submit").find(".app_password").val(),rememberme:1},function(c){a(".app_wait_img").remove();var d=0;try{d=parseInt(c.status,10)}catch(e){d=0}return d?void(c.status&&1==c.status?(a(".appointments-login_inner").text(l10nAppApi.logged_in),window.location.href=window.location.href,window.location.reload()):alert(l10nAppApi.error)):(b.after('<div class="app_error">'+c.error+"</div>"),!1)})}:b.is(".appointments-login_link-cancel")&&(e=function(){return d.remove(),!1});e&&b.unbind("click").bind("click",e)}),l10nAppApi.gg_client_id&&"undefined"!=typeof gapi&&"undefined"!=typeof gapi.signin&&gapi.signin.go()}function d(b){b.status.signed_in&&a.post(_appointments_data.ajax_url,{action:"app_google_plus_login",token:b.access_token},function(a){window.location.href=window.location.href,window.location.reload()})}a(function(){a(document).on("click",".appointments-login_show_login",function(){return c(a(this)),!1}),l10nAppApi.gg_client_id&&(window.app_google_plus_login_callback=d,function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/client:plusone.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}())})}(jQuery);