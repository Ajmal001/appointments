/*!  - v2.4.3-beta.1
 * https://premium.wpmudev.org/project/appointments-plus/
 * Copyright (c) 2019; * Licensed GPLv2+ */
jQuery(document).ready(function(a){function b(a){c[a]&&(c[d]&&(c[d].$el.removeClass("current"),c[d].$section.removeClass("current")),c[a].$el.addClass("current"),c[a].$section.addClass("current"),d=a)}var c=[],d="",e=0;if(a("ul.subsubsub a").each(function(){e++;var d=a(this),f=d.data("section");c[f]={$el:d,$section:a("#app-settings-"+f)},d.click(function(a){b(f)})}),e){var f=window.location.hash;f=f?f.substr(1):Object.keys(c)[0],b(f)}a(".wp-list-table.services a.edit").on("click",function(){var d=(a(this).closest("tr"),"section-edit-service"),e=a("#app-settings-"+d),f={action:"appointment_get_service",id:a(this).data("id"),_wpnonce:a(this).data("nonce")};c[d]={$el:a(this),$section:e},a.post(ajaxurl,f,function(c){c.success?(a("#service-capacity",e).val(c.data.capacity),a("#service-duration",e).val(c.data.duration),a("#service-id",e).val(c.data.ID),a("#service-name",e).val(c.data.name),a("#service-page",e).val(c.data.page),a("#service-price",e).val(c.data.price),a.fn.slider&&a("#service-capacity-slider-edit").slider("option","value",c.data.capacity),"undefined"!=typeof c.data.service_padding&&("undefined"!=typeof c.data.service_padding.before&&a("#service_padding_before",e).val(c.data.service_padding.before),"undefined"!=typeof c.data.service_padding.after&&a("#service_padding_after",e).val(c.data.service_padding.after)),"undefined"!=typeof c.data.service_location&&a("#service_location",e).val(c.data.service_location),"undefined"!=typeof c.data.shared_resources&&(a(".app-shared_service label").show(),a(".app-shared_service input[type=checkbox]").each(function(){value=parseInt(a(this).val()),a(this).prop("checked",!1).prop("disabled",!1),parseInt(c.data.ID)===value?(a(this).prop("checked",!1).prop("disabled",!0),a(this).closest("label").hide()):("undefined"!=typeof c.data.shared_resources.shared_ids&&(checked=c.data.shared_resources.shared_ids.indexOf(value),a(this).prop("checked",-1<checked)),"undefined"!=typeof c.data.shared_resources.direct_ids&&(checked=c.data.shared_resources.direct_ids.indexOf(value),a(this).prop("disabled",-1<checked)))})),b(d)):window.alert(c.data.message)})}),a(".wp-list-table.workers a.edit").on("click",function(){var d=(a(this).closest("tr"),"section-edit-worker"),e=a("#app-settings-"+d),f={action:"appointment_get_worker",id:a(this).data("id"),_wpnonce:a(this).data("nonce")};c[d]={$el:a(this),$section:e},a.post(ajaxurl,f,function(c){c.success?(a("#worker-dummy",e).prop("checked",c.data.dummy),a("#worker-page",e).val(c.data.page),a("#worker-price",e).val(c.data.price),a("#worker-user",e).val(c.data.ID),a("#worker-user-display-name",e).html(c.data.display_name),a("input[name=multiselect_services_provided]",e).prop("checked",!1),a("#services_provided option",e).prop("selected",!1),a.each(c.data.services_provided,function(b,c){a('#services_provided option[value="'+c+'"]',e).prop("selected",!0)}),a(".add_worker_multiple").multiselect("refresh"),"undefined"!=typeof c.data.worker_padding&&("undefined"!=typeof c.data.worker_padding.before&&a("#worker_padding_before",e).val(c.data.worker_padding.before),"undefined"!=typeof c.data.worker_padding.after&&a("#worker_padding_after",e).val(c.data.worker_padding.after)),"undefined"!=typeof c.data.worker_location&&a("#worker_location",e).val(c.data.worker_location),b(d)):window.alert(c.data.message)})})}),jQuery(document).ready(function(a){function b(b,c){a.post(ajaxurl,b,function(b){b.success&&c.detach();var d='<div class="notice notice-'+(b.success?"success":"error")+' is-dismissible"><p>'+b.data.message+"</p></div>";a(".appointments-settings h1").after(d)})}var c,d,e,f=a(".custom_color_row"),g=a(".preset_samples");a('select[name="color_set"]').change(function(){var b=a(this).val();if(0==b)f.show(),g.hide();else{f.hide(),g.show();for(e in app_i10n.classes)if(app_i10n.classes.hasOwnProperty(e)){for(c=[],d=1;d<=3;d++)c[d]=app_i10n.presets[e][d];g.find("a."+e).css("background-color","#"+c[b])}}}),a(".colorpicker_input").wpColorPicker(),a("#app-settings-section-new-worker form.add-new-service-provider").on("submit",function(){var b=a(this);if(null==a("#services_provided",b).val())return alert(app_i10n.messages.select_service_provider),!1}),a(".appointment-create-page a.button").on("click",function(){var b=a("select",a(this).closest("td")).val(),c={action:a(this).data("action"),_wpnonce:a(this).data("nonce"),app_page_type:b};return a.post(ajaxurl,c,function(b){var c='<div class="notice '+(b.success?"updated":"error")+'"><p>'+b.data.message+"</p></div>";a(".appointments-settings h1").after(c)}),!1}),a(document).on("click",".wp-list-table.services .delete a",function(){if(window.confirm(app_i10n.messages.service.delete_confirmation)){var c=a(this).closest("tr"),d={action:"delete_service",nonce:a(this).data("nonce"),id:a(this).data("id")};b(d,c)}}),a(document).on("click","#app-settings-section-services input.action",function(){var b=(a(this).closest("form"),a(".check-column input:checked")),c=a("select",a(this).parent()).val();return 0===b.length?(window.alert(app_i10n.messages.bulk_actions.no_items),!1):"-1"===c?(window.alert(app_i10n.messages.bulk_actions.no_action),!1):!!window.confirm(app_i10n.messages.services.delete_confirmation)&&void 0}),a(document).on("click",".wp-list-table.workers .delete a",function(){if(window.confirm(app_i10n.messages.workers.delete_confirmation)){var c=a(this).closest("tr"),d={action:"delete_worker",nonce:a(this).data("nonce"),id:a(this).data("id")};b(d,c)}}),a(document).on("click","#app-settings-section-workers input.action",function(){var b=(a(this).closest("form"),a(".check-column input:checked")),c=a("select",a(this).parent()).val();return 0===b.length?(window.alert(app_i10n.messages.bulk_actions.no_items),!1):"-1"===c?(window.alert(app_i10n.messages.bulk_actions.no_action),!1):!!window.confirm(app_i10n.messages.workers.delete_confirmation)&&void 0}),a.fn.slider&&a("div.app-ui-slider").each(function(){var b=a(this).data("target-id");if(b){var c=a("#"+b),d=c.val(),e=a(this).data("max")||100,f=a(this).data("min")||0;a(this).slider({value:d,min:f,max:e,slide:function(a,b){c.val(b.value)}})}}),columns.saveManageColumnsState=function(){var b=this.hidden();a.post(ajaxurl,{action:"hidden-columns",hidden:b,screenoptionnonce:a("#screenoptionnonce").val(),page:pagenow,tab:a("input[name=app-current-tab]").val()})}});