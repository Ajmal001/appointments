!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e){AppointmentsAdmin=window.AppointmentsAdmin||{},function(t,e,n){"use strict";function i(t){function i(){n("#the-list .check-column :checked").length?n("#app-export-selected").show():n("#app-export-selected").hide()}var o={servicesPrice:[]};return this.options=n.extend({},o,t),this.isEditing=!1,this.$exportButton=n(".app-export_trigger"),this.$addNew=n(".add-new-h2"),this.$addNewSpinner=n(".add-new-waiting"),this.$editAppointment=n(".app-inline-edit"),this.$table=n("table.appointments"),n("#delete_removed").click(function(t){return confirm(e.deleteRecordsConfirm)}),this.$addNew.click(function(){this.$addNewSpinner.show(),this.removeActiveEditorForms(),this.showEditorForm(0,function(t){this.$table.prepend(t),this.$addNewSpinner.hide()})}.bind(this)),this.$editAppointment.click(function(t){var e=n(t.target).data("app-id"),i=n("#app-"+e),o=i.find(".waiting");o.show(),this.removeActiveEditorForms(),this.showEditorForm(e,function(t){o.hide(),i.hide(),i.after(t)})}.bind(this)),this.$table.on("click",".cancel",this.removeActiveEditorForms.bind(this)),this.$table.on("change",'select[name="service"]',function(t){var e=n(t.target),i=e.val();this.options.servicesPrice[i]&&e.parents(".inline-edit-col").find('input[name="price"]').val(this.options.servicesPrice[i])}.bind(this)),this.$table.on("click",".save",this.saveEditor.bind(this)),this.$exportButton.click(function(t){var e=n(t.target),i=e.closest("form"),o=n(".column-delete.app-check-column :checked"),r=i.find("#app-export_type");return e.is("#app-export-selected")&&o.length?(o.each(function(){i.append("<input type='hidden' name='app[]' value='"+e.val()+"' />")}),r.val("selected"),!0):e.is("#app-export-type")?(i.append("<input type='hidden' name='status' value='"+e.attr("data-type")+"' />"),r.val("type"),!0):!!e.is("#app-export-all")&&(r.val("all"),!0)}),n(".app-change-status-btn").click(function(t){var e=n(this);return n("th.app-check-column input:checkbox:checked").each(function(){e.after('<input type="hidden" name="app[]" value="'+n(this).val()+'"/>')}),!0}),n(".info-button").click(function(){n(".status-description").toggle("fast")}),n(document).on("change",".check-column input, .app-column-cb input",i),n(i),this}i.prototype.removeActiveEditorForms=function(){this.$table.find(".inline-edit-row").hide(),n(".app-tr").show()},i.prototype.showEditorForm=function(t,i){var o={action:"inline_edit",col_len:this.options.columns,app_id:t,nonce:this.options.nonces.addNew,columns:this.options.columns};return n.post(ajaxurl,o,function(t){t&&t.error?alert(t.error):t&&"function"==typeof i?(i.call(this,[t.result]),this.initDatepicker()):alert(e.unexpectedError)}.bind(this),"json")},i.prototype.initDatepicker=function(){n(".datepicker").datepicker({dateFormat:"yy-mm-dd",firstDay:AppointmentsDateSettings.weekStart})},i.prototype.saveEditor=function(t){var i=n(t.target),o=i.parents(".inline-edit-row"),r=o.find(".waiting");r.show();var a=["user","cname","email","phone","address","city","service","worker","price","date","time","note","status"],s={};n.map(a,function(t){"cname"===t?s.name=o.find('[name="'+t+'"]').val():s[t]=o.find('[name="'+t+'"]').val()});var p=i.data("app-id");s.app_id=p,s.resend=o.find('input[name="resend"]').is(":checked")?1:0,s.nonce=this.options.nonces.addNew,s.action="inline_edit_save",n(document).trigger("app-appointment-inline_edit-save_data",[s,o]),n.post(ajaxurl,s,function(t){return r.hide(),t&&t.error?void o.find(".error").html(t.error).show().delay(1e4).fadeOut("slow"):t?(o.find(".error").html(t.message).show().delay(1e4).fadeOut("slow"),void(p&&parseInt(p,10)||!t||!t.app_id||location.reload())):void alert(e.unexpectedError)}.bind(this),"json")},t.appointmentsList=function(t){return new i(t)}}(AppointmentsAdmin,Appi18n,jQuery)}]);
//# sourceMappingURL=admin-appointments-list.js.map